<div class="max-w-md mx-auto mt-10 bg-white p-6 rounded-lg shadow space-y-8">

  <!-- =====================
       チャレンジ概要
       ===================== -->
  <section class="space-y-2">
    <h1 class="text-xl font-bold text-gray-800">
      <%= @challenge.title %>
    </h1>

    <p class="text-sm text-gray-500">
      作成者：<%= @challenge.user.name %>
    </p>
  </section>

  <!-- =====================
       基本情報
       ===================== -->
  <section class="bg-gray-50 rounded p-4 space-y-2 text-sm text-gray-700">
    <div>📅 <%= @challenge.target_date %></div>
    <div>⏰ <%= @challenge.target_time.strftime("%H:%M") %></div>
    <div>
      🧩
      <span class="font-medium">
        <%= @challenge.solo? ? "ソロチャレンジ" : "みんなでチャレンジ" %>
      </span>
    </div>
  </section>

  <!-- =====================
       参加者情報（マルチのみ）
       ===================== -->
  <% if @challenge.multi? %>
    <section class="space-y-2">
      <h2 class="font-semibold text-gray-800">
        🤝 参加者
        <span class="text-sm text-gray-500">
          （<%= @participants.count %> / <%= @challenge.capacity %>）
        </span>
      </h2>

      <% if @participants.any? %>
        <ul class="text-sm text-gray-700 space-y-1">
          <% @participants.each do |p| %>
            <li>・<%= p.user.name %></li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-sm text-gray-500">まだ参加者はいません</p>
      <% end %>
    </section>
  <% end %>

  <!-- =====================
       アクションエリア
       ===================== -->
 <section class="pt-4 border-t space-y-2">

  <% if @challenge.solo? %>
    <p class="text-sm text-gray-500 text-center">
      このチャレンジはソロ専用です
    </p>

  <% elsif @challenge.recruiting? %>
    <% if @joined %>
      <p class="text-sm text-green-600 text-center font-medium">
        ✔ 参加中です
      </p>
    <% elsif @participants.count < @challenge.capacity %>
      <%= link_to "このチャレンジに参加する",
            challenge_participations_path(@challenge),
            data: { turbo_method: :post },
            class: "block w-full text-center bg-orange-500 text-white py-2 rounded" %>
    <% else %>
      <p class="text-sm text-red-500 text-center">
        定員に達しています
      </p>
    <% end %>

  <% elsif @challenge.ready? %>
    <p class="text-sm text-blue-600 text-center font-medium">
      ⏰ 募集が成立しました。起床時刻をお待ちください
    </p>
    <% if !@challenge.wake_up_logs.exists?(user: current_user) %>
      <%= link_to "起きた！",
          challenge_wake_up_log_path(@challenge),
          data: { turbo_method: :post },
          class: "block w-full text-center bg-green-500 text-white py-2 rounded" %>
    <% else %>
      <p class="text-sm text-green-600 text-center">
        ✔ 起床を記録しました
      </p>
    <% end %>
    

  <% elsif @challenge.success? %>
    <p class="text-sm text-green-700 text-center font-bold">
      🎉 チャレンジ成功！
    </p>

  <% elsif @challenge.failed? %>
    <p class="text-sm text-red-700 text-center font-bold">
      😢 チャレンジ失敗
    </p>
  <% end %>

  </section>
</div>